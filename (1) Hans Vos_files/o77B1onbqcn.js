if (self.CavalryLogger) { CavalryLogger.start_js(["IZc98"]); }

__d("MessengerCopyLinkActionItem.react",["fbt","FBClipboardLink.react","MessengerConfig","MessengerContextualActions.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerContextualActions.react").Item;function a(a){return(a==null?void 0:(a=a.attachments)==null?void 0:(a=a[0])==null?void 0:(a=a.share)==null?void 0:a.uri)!=null&&b("MessengerConfig").CopyAttachmentLink}function c(a){var c=a.message,d=a.onClick;c=String(c==null?void 0:(a=c.attachments)==null?void 0:(c=a[0])==null?void 0:(a=c.share)==null?void 0:a.uri);a=g._("Copy Link To Share");return b("React").createElement(h,{onClick:function(){return d()}},b("React").createElement(b("FBClipboardLink.react"),{suppress:!0,tooltip:null,value:c},a))}e.exports={actionItem:c,shouldRender:a}}),null);
__d("MessengerDeepLinkActionItem.react",["fbt","FBClipboardLink.react","MessengerConfig","MessengerContextualActions.react","MessengerURIUtils.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerContextualActions.react").Item;function a(){return b("MessengerConfig").ShowMessageLinks}function c(a){var c=a.onClick;a=a.message;a=b("MessengerURIUtils.bs").getURIForMessage(a).getQualifiedURIBase().toString();var d=g._("Copy Link");return b("React").createElement(h,{key:"react",onClick:c},b("React").createElement(b("FBClipboardLink.react"),{suppress:!0,tooltip:null,value:a},d))}e.exports={actionItem:c,shouldRender:a}}),null);
__d("MessengerDeleteMessageDialogReact.bs",["fbt","bs_block","bs_curry","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerDeleteMessageDialogReact");function i(){return g._("Delete Message")}var j=g._("Are you sure you want to delete this message?");function k(){return g._("Delete")}function l(a,c,d,e){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(c){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,a,void 0,c[1][0],void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,i(0))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[j])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](d,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,k(0),void 0,"danger",function(){return b("bs_curry")._1(c[3],0)},0,void 0,void 0,void 0,[]))]))]))},function(){return[!0]},h[10],function(a,d){return b("bs_block").__(2,[[!1],function(){return b("bs_curry")._1(c,0)}])},h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return l(a.onToggle,a.onDelete,a.onCancel,[])});f.component=h;f.renderDialogHeaderMsg=i;f.dialogBodyMsg=j;f.renderDialogButtonMsg=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerDeleteMessageActionItem.react",["fbt","Bootloader","CurrentUser","MercuryMessageActions","MessengerContextualActions.react","MessengerDeleteMessageDialogReact.bs","MessengerDialogs.bs","MessengerState.bs","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerDeleteMessageDialogReact.bs").jsComponent,i=b("MessengerContextualActions.react").Item;function a(){return!0}c=b("React").createClass({displayName:"MessengerDeleteMessageActionItem",render:function(){return b("React").createElement(i,{key:"delete",onClick:this._handleDelete},b("gkx")("932794")?g._("Remove"):g._("Delete"))},_handleDelete:function(){var a=this,c=this.props.message;if(b("gkx")("932794")){this._handleRemove();return}b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(h,{onDelete:function(){b("MercuryMessageActions").get()["delete"](c.thread_id,[c.message_id])},onToggle:a._handleDialogToggle,onCancel:function(){return a.props.onClick()},isFromViewer:a.props.isFromViewer})})},_handleRemove:function(){var a=this,c=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),this.props.message.thread_id);b("Bootloader").loadModules(["RemoveMessageDialog"],function(b){b.showDialog(a.props.message,c.thread_unsendability_status,a.props.isFromViewer,function(){return a.props.onClick()})},"MessengerDeleteMessageActionItem.react")},_handleDialogToggle:function(a){a||b("MessengerDialogs.bs").removeDialog()}});e.exports={actionItem:c,shouldRender:a}}),null);
__d("MessengerReactionActionItem.react",["fbt","MessengerContextualActions.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerContextualActions.react").Item;function a(){return!0}function c(a){a=a.onClick;return b("React").createElement(h,{key:"react",onClick:a},g._("React"))}e.exports={actionItem:c,shouldRender:a}}),null);
__d("MessengerReplyActionItem.react",["fbt","Bootloader","CurrentUser","MessageReplyPermissions","MessengerContextualActions.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerContextualActions.react").Item;function a(a){return b("MessageReplyPermissions").canReplyToMessage(a)}function c(a){var c=a.onClick;a.message;a=function(){b("Bootloader").loadModules(["MessageReplyTypedLogger","MessageReplyEntryPoint","MessageReplyEvent"],function(a,c,d){a=new a();a.setEvent(d.REPLY_INITIATED).setIsWorkplace(b("CurrentUser").isWorkUser()).setEntryPoint(c.THREE_DOT_BUTTON).log()},"MessengerReplyActionItem.react"),c()};return b("React").createElement(h,{key:"react",onClick:a},g._("Reply"))}e.exports={actionItem:c,shouldRender:a}}),null);
__d("XMessengerDotComSaveController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/save/message/",{})}),null);
__d("MessengerSaveToFacebookActionItem.react",["fbt","AsyncRequest","CollectionCurationMechanisms","CollectionsDisplaySurface","CurrentUser","JSResource","LazyComponent.react","MercuryAttachmentType","MessengerConfig","MessengerContextualActions.react","MessengerDialogs.bs","MessengerDotComSaveModule","React","ReasonBootloadOnRender.react","ReasonResource","SavedStateActions","SaveMessageUtils","StoryAttachmentStyle","URLMatcher","XMessengerDotComSaveController","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerContextualActions.react").Item;function i(a){return j(a)&&!b("MessengerConfig").canSaveMessages&&!b("gkx")("843916")}function j(a){__p&&__p();if(b("MessengerDotComSaveModule").enabled_messenger_save&&k(a))return!0;if(b("MessengerDotComSaveModule").enabled_messenger_save&&a.attachments&&a.attachments.length>0&&a.attachments[0].share&&a.attachments[0].share.media&&a.attachments[0].share.media.playable)return!0;if(b("MessengerDotComSaveModule").enabled_messenger_save){a=b("URLMatcher").match(a.body);if(a!=null&&a.length>0)return!0}return!1}function k(a){__p&&__p();a=a.attachments;if(!a||a.length===0)return!1;for(var c=0;c<a.length;c++){var d=a[c];if(d.share&&d.share.style_list){var e=d.share.style_list;e=b("SaveMessageUtils").isSavableMessageAttachment(e)}else e=d.attach_type===b("MercuryAttachmentType").VIDEO;if(!e)return!1}return!0}a=b("React").createClass({displayName:"MessengerSaveToFacebookActionItem",render:function(){return i(this.props.message)&&b("React").createElement(h,{onClick:this._handleFacebookSave},this._renderSaveItemMsg())},_renderSaveItemMsg:function(){return b("CurrentUser").isWorkUser()?g._("Save to Workplace"):this._isMarketplaceAttachment()?g._("Save to Marketplace"):g._("Save to Facebook")},_isMarketplaceAttachment:function(){var a=this.props.message;if(!b("MessengerDotComSaveModule").enabled_messenger_save)return!1;a=(a=a)!=null?(a=a.attachments)!=null?(a=a[0])!=null?(a=a.share)!=null?a.style_list:a:a:a:a;if(a)for(var c=0;c<a.length;c++)if(a[c]===b("StoryAttachmentStyle").GROUP_SELL_PRODUCT_ITEM)return!0;return!1},_handleFacebookSave:function(){var a=this,c=this.props.message,d=b("CollectionsDisplaySurface").MESSENGER_DOT_COM_MESSAGE,e=b("CollectionCurationMechanisms").RIGHT_CLICK;new(b("AsyncRequest"))().setURI(b("XMessengerDotComSaveController").getURIBuilder().getURI()).setData({action:b("SavedStateActions").SAVE,surface:d,mechanism:e,message_id:c.message_id}).send();b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("ReasonBootloadOnRender.react"),{loader:b("ReasonResource")(b("JSResource")("MessengerSaveMessageDialogReact.bs").__setRef("MessengerSaveToFacebookActionItem.react")),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{onToggle:a._handleDialogToggle,isMarketplaceAttachment:a._isMarketplaceAttachment()})})});this.props.onClick()},_handleDialogToggle:function(a){a||b("MessengerDialogs.bs").removeDialog()}});e.exports={actionItem:a,shouldRender:i}}),null);
__d("MessengerSaveToMessengerActionItem.react",["fbt","AsyncRequest","CollectionCurationMechanisms","CollectionsDisplaySurface","JSResource","LazyComponent.react","MessengerConfig","MessengerContextualActions.react","MessengerDialogs.bs","React","ReasonBootloadOnRender.react","ReasonResource","SavedStateActions","XMessengerDotComSaveController","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerContextualActions.react").Item;function i(){return b("MessengerConfig").canSaveMessages&&!b("gkx")("843916")}a=b("React").createClass({displayName:"MessengerSaveToMessengerActionItem",render:function(){return i()&&b("React").createElement(h,{onClick:this._handleMessengerSave},g._("Save"))},_handleMessengerSave:function(){var a=this.props.message,c=b("CollectionsDisplaySurface").MESSENGER_DOT_COM_MESSAGE,d=b("CollectionCurationMechanisms").RIGHT_CLICK;new(b("AsyncRequest"))().setURI(b("XMessengerDotComSaveController").getURIBuilder().getURI()).setData({action:b("SavedStateActions").SAVE,surface:c,mechanism:d,message_id:a.message_id}).setHandler(this._showMessengerSaveConfirmationDialog).send();this.props.onClick()},_showMessengerSaveConfirmationDialog:function(a){var c=this;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("ReasonBootloadOnRender.react"),{loader:b("ReasonResource")(b("JSResource")("MessengerSaveMessageDialogReact.bs").__setRef("MessengerSaveToMessengerActionItem.react")),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{onToggle:c._handleDialogToggle})})})},_handleDialogToggle:function(a){a||b("MessengerDialogs.bs").removeDialog()}});e.exports={actionItem:a,shouldRender:i}}),null);
__d("MessengerSetAsDescriptionActionItem.react",["fbt","CurrentUser","MercuryThreadActions","MessagingThreadCustomizationSource","MessengerAdminGroupUtils","MessengerConfig","MessengerContextualActions.react","MessengerState.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerContextualActions.react").Item;function a(a){var c,d=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),a.thread_id),e=d&&d.associated_object;c=d&&d.marketplace_thread_data&&(((c=d.marketplace_thread_data)==null?void 0:c.for_sale_item)||((c=d.marketplace_thread_data)==null?void 0:c.buyer_fbid)||((c=d.marketplace_thread_data)==null?void 0:c.seller_fbid));return a.body!=null&&d!=null&&!d.is_canonical&&b("MessengerAdminGroupUtils").canUpdateThreadDescription(d,b("CurrentUser").getID())&&b("MessengerConfig").ILPMBE&&!e&&!c}function c(a){var c=a.message,d=a.onClick;a=function(){if(b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),c.thread_id))return;b("MercuryThreadActions").get().changeGroupThreadDescription(c.thread_id,c.body,b("MessagingThreadCustomizationSource").SET_FROM_MESSAGE);d()};return b("React").createElement(h,{onClick:a},g._("Set Group Description"))}e.exports={actionItem:c,shouldRender:a}}),null);
__d("MessengerUnsaveActionItem.react",["fbt","MessengerContextualActions.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerContextualActions.react").Item;function a(){return!0}function c(a){a=a.onClick;return b("React").createElement(h,{onClick:a},g._("Unsave"))}e.exports={actionItem:c,shouldRender:a}}),null);
__d("MessengerViewSourceActionItem.react",["fbt","FBLogger","MessengerContextualActions.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerContextualActions.react").Item;function a(a){return a()}function c(a){var c=a.onClick;a=a.isShowingOriginal;a=a?g._("Show Formatted"):g._("Show Original");var d=function(){b("FBLogger")("messenger_dot_com").info("formatting_toggled"),c()};return b("React").createElement(h,{onClick:d},a)}e.exports={actionItem:c,shouldRender:a}}),null);
__d("MessengerMessageActionItemList",["MessengerCopyLinkActionItem.react","MessengerDeepLinkActionItem.react","MessengerDeleteMessageActionItem.react","MessengerEnvironment","MessengerReactionActionItem.react","MessengerReplyActionItem.react","MessengerSaveToFacebookActionItem.react","MessengerSaveToMessengerActionItem.react","MessengerSetAsDescriptionActionItem.react","MessengerViewSourceActionItem.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerCopyLinkActionItem.react").actionItem,h=b("MessengerCopyLinkActionItem.react").shouldRender,i=b("MessengerDeepLinkActionItem.react").actionItem,j=b("MessengerDeepLinkActionItem.react").shouldRender,k=b("MessengerDeleteMessageActionItem.react").actionItem,l=b("MessengerDeleteMessageActionItem.react").shouldRender,m=b("MessengerReactionActionItem.react").actionItem,n=b("MessengerReactionActionItem.react").shouldRender,o=b("MessengerReplyActionItem.react").actionItem,p=b("MessengerReplyActionItem.react").shouldRender,q=b("MessengerSaveToFacebookActionItem.react").actionItem,r=b("MessengerSaveToFacebookActionItem.react").shouldRender,s=b("MessengerSaveToMessengerActionItem.react").actionItem,t=b("MessengerSaveToMessengerActionItem.react").shouldRender,u=b("MessengerSetAsDescriptionActionItem.react").actionItem,v=b("MessengerSetAsDescriptionActionItem.react").shouldRender,w=b("MessengerViewSourceActionItem.react").actionItem,x=b("MessengerViewSourceActionItem.react").shouldRender;function a(a){return b("React").createElement(b("React").Fragment,null,[r(a.message)&&b("React").createElement(q,{key:"SaveToFacebookActionItem",onClick:a.closeActionList,message:a.message}),t()&&b("React").createElement(s,{key:"SaveToMessengerActionItem",onClick:a.closeActionList,message:a.message}),l()&&b("React").createElement(k,{key:"DeleteMessageActionItem",isFromViewer:!!a.isFromViewer,onClick:a.closeActionList,message:a.message}),h(a.message)&&b("React").createElement(g,{key:"CopyLinkActionItem",onClick:a.closeActionList,message:a.message}),a.hasFormatting&&a.onToggleOriginal&&x(a.hasFormatting)&&b("React").createElement(w,{key:"ViewSourceActionItem",isShowingOriginal:!!a.isShowingOriginal,onClick:function(){a.onToggleOriginal&&a.onToggleOriginal(),a.closeActionList()}}),b("MessengerEnvironment").messengerui&&j()&&b("React").createElement(i,{key:"DeepLinkActionItem",message:a.message,onClick:a.closeActionList}),a.includeReactions&&n()&&b("React").createElement(m,{key:"ReactionActionItem",message:a.message,onClick:a.openReactionsPopover}),!b("MessengerEnvironment").messengerui&&a.onReplyToMessage&&p(a.message)&&b("React").createElement(o,{key:"ReplyActionItem",message:a.message,onClick:a.onReplyToMessage}),v(a.message)&&b("React").createElement(u,{key:"SetAsDescriptionActionItem",onClick:a.closeActionList,message:a.message})].filter(Boolean))}e.exports=a}),null);
__d("MessengerRemovedTombstoneActionItemList",["MessengerDeleteMessageActionItem.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerDeleteMessageActionItem.react").actionItem,h=b("MessengerDeleteMessageActionItem.react").shouldRender;function a(a){return b("React").createElement(b("React").Fragment,null,[h()&&b("React").createElement(g,{key:"DeleteMessageActionItem",isFromViewer:!!a.isFromViewer,onClick:a.closeActionList,message:a.message})].filter(Boolean))}e.exports=a}),null);
__d("MessengerSavedMessageActionItemList",["MessengerUnsaveActionItem.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerUnsaveActionItem.react").actionItem,h=b("MessengerUnsaveActionItem.react").shouldRender;function a(a){return b("React").createElement(b("React").Fragment,null,[h()&&b("React").createElement(g,{onClick:a.closeActionList})].filter(Boolean))}e.exports=a}),null);